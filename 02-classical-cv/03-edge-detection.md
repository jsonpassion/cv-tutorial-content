# ì—ì§€ ê²€ì¶œ

> Sobel, Canny, Laplacian ì—ì§€ ê²€ì¶œ

## ê°œìš”

ì´ë¯¸ì§€ì—ì„œ **ì—ì§€(Edge)**ë€ ë°ê¸°ê°€ ê¸‰ê²©í•˜ê²Œ ë³€í•˜ëŠ” ê²½ê³„ë¥¼ ë§í•©ë‹ˆë‹¤. ë¬¼ì²´ì˜ ìœ¤ê³½ì„ , ê·¸ë¦¼ìì˜ ê²½ê³„, í…ìŠ¤íŠ¸ì˜ íš â€” ì´ ëª¨ë“  ê²ƒì´ ì—ì§€ì…ë‹ˆë‹¤. ì—ì§€ë¥¼ ì˜ ì°¾ì•„ë‚´ë©´ ì´ë¯¸ì§€ì—ì„œ "ë¬´ì—‡ì´ ì–´ë””ì— ìˆëŠ”ì§€"ë¥¼ íŒŒì•…í•˜ëŠ” ì²« ë‹¨ì¶”ë¥¼ ë¼ìš¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

**ì„ ìˆ˜ ì§€ì‹**: [í•„í„°ì™€ ì»¤ë„](./02-filters-kernels.md) â€” ì»¤ë„, í•©ì„±ê³± ì—°ì‚°ì˜ ì´í•´
**í•™ìŠµ ëª©í‘œ**:
- ì—ì§€ê°€ ìˆ˜í•™ì ìœ¼ë¡œ ë¬´ì—‡ì„ ì˜ë¯¸í•˜ëŠ”ì§€(ë¯¸ë¶„) ì´í•´í•œë‹¤
- Sobel, Laplacian, Canny ì—ì§€ ê²€ì¶œê¸°ì˜ ì°¨ì´ë¥¼ ì„¤ëª…í•  ìˆ˜ ìˆë‹¤
- OpenCVë¡œ ì—ì§€ ê²€ì¶œì„ ì ìš©í•˜ê³  ê²°ê³¼ë¥¼ ë¹„êµí•  ìˆ˜ ìˆë‹¤

## ì™œ ì•Œì•„ì•¼ í• ê¹Œ?

ì—ì§€ ê²€ì¶œì€ **ê°ì²´ íƒì§€, ì´ë¯¸ì§€ ë¶„í• , ë„í˜• ì¸ì‹, OCR(ê¸€ì ì¸ì‹)** ë“± ìˆ˜ë§ì€ CV ì‘ì—…ì˜ ì „ì²˜ë¦¬ ë‹¨ê³„ì…ë‹ˆë‹¤. ë”¥ëŸ¬ë‹ ì‹œëŒ€ì—ë„ Canny ì—ì§€ëŠ” **ControlNet** ê°™ì€ ìƒì„± AIì˜ ì…ë ¥ ì¡°ê±´ìœ¼ë¡œ í™œë°œíˆ ì‚¬ìš©ë©ë‹ˆë‹¤.

## í•µì‹¬ ê°œë…

### 1. ì—ì§€ë€ ë¬´ì—‡ì¸ê°€?

> ğŸ’¡ **ë¹„ìœ **: í•˜ì–€ ì¢…ì´ ìœ„ì— ê²€ì€ ê¸€ìê°€ ìˆë‹¤ê³  ìƒìƒí•˜ì„¸ìš”. ì¢…ì´ ë¶€ë¶„ì€ ë°ê¸°ê°€ ê· ì¼í•˜ê³ , ê¸€ìì™€ ë§Œë‚˜ëŠ” ê²½ê³„ì—ì„œ ë°ê¸°ê°€ **ê¸‰ê²©íˆ ë³€í•©ë‹ˆë‹¤.** ì´ ê¸‰ê²©í•œ ë³€í™” ì§€ì ì´ ë°”ë¡œ ì—ì§€ì…ë‹ˆë‹¤.

ìˆ˜í•™ì ìœ¼ë¡œ ì—ì§€ëŠ” ì´ë¯¸ì§€ ë°ê¸°ì˜ **ê¸°ìš¸ê¸°(Gradient)**ê°€ í° ê³³ì…ë‹ˆë‹¤. ê¸°ìš¸ê¸°ë¥¼ êµ¬í•˜ë ¤ë©´ **ë¯¸ë¶„**ì´ í•„ìš”í•©ë‹ˆë‹¤.

> **ë°ê¸°ê°€ ì¼ì •í•œ ì˜ì—­** â†’ ê¸°ìš¸ê¸° â‰ˆ 0 â†’ ì—ì§€ ì•„ë‹˜
> **ë°ê¸°ê°€ ê¸‰ë³€í•˜ëŠ” ì˜ì—­** â†’ ê¸°ìš¸ê¸° í¼ â†’ ì—ì§€!

### 2. Sobel ì—ì§€ ê²€ì¶œ â€” ë°©í–¥ë³„ ê¸°ìš¸ê¸°

> ğŸ’¡ **ë¹„ìœ **: Sobelì€ ì´ë¯¸ì§€ë¥¼ ë‘ ë²ˆ ì¡°ì‚¬í•˜ëŠ” **íƒì •**ì…ë‹ˆë‹¤. í•œ ë²ˆì€ **ê°€ë¡œ ë°©í–¥**ìœ¼ë¡œ ë°ê¸° ë³€í™”ë¥¼ í™•ì¸í•˜ê³ , í•œ ë²ˆì€ **ì„¸ë¡œ ë°©í–¥**ìœ¼ë¡œ í™•ì¸í•©ë‹ˆë‹¤. ë‘ ê²°ê³¼ë¥¼ í•©ì¹˜ë©´ ëª¨ë“  ë°©í–¥ì˜ ì—ì§€ë¥¼ ì°¾ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

Sobel í•„í„°ëŠ” ì´ë¯¸ì§€ì˜ 1ì°¨ ë¯¸ë¶„(ê¸°ìš¸ê¸°)ì„ ê·¼ì‚¬í•©ë‹ˆë‹¤.

**Sobel ì»¤ë„:**

ìˆ˜í‰ ë°©í–¥(Gx) â€” ì¢Œìš° ë°ê¸° ì°¨ì´ ê²€ì¶œ:

| | ì—´1 | ì—´2 | ì—´3 |
|---|:---:|:---:|:---:|
| **í–‰1** | -1 | 0 | 1 |
| **í–‰2** | -2 | 0 | 2 |
| **í–‰3** | -1 | 0 | 1 |

ìˆ˜ì§ ë°©í–¥(Gy) â€” ìƒí•˜ ë°ê¸° ì°¨ì´ ê²€ì¶œ:

| | ì—´1 | ì—´2 | ì—´3 |
|---|:---:|:---:|:---:|
| **í–‰1** | -1 | -2 | -1 |
| **í–‰2** | 0 | 0 | 0 |
| **í–‰3** | 1 | 2 | 1 |

```python
import cv2
import numpy as np

img = cv2.imread("photo.jpg", cv2.IMREAD_GRAYSCALE)

# ìˆ˜í‰ ì—ì§€ (ì¢Œìš° ë°ê¸° ë³€í™”)
sobel_x = cv2.Sobel(img, cv2.CV_64F, 1, 0, ksize=3)

# ìˆ˜ì§ ì—ì§€ (ìƒí•˜ ë°ê¸° ë³€í™”)
sobel_y = cv2.Sobel(img, cv2.CV_64F, 0, 1, ksize=3)

# ë‘ ë°©í–¥ í•©ì¹˜ê¸° (ì—ì§€ í¬ê¸°)
sobel_combined = np.sqrt(sobel_x**2 + sobel_y**2)
sobel_combined = np.uint8(np.clip(sobel_combined, 0, 255))

print(f"ìˆ˜í‰ ì—ì§€: min={sobel_x.min():.0f}, max={sobel_x.max():.0f}")
print(f"ìˆ˜ì§ ì—ì§€: min={sobel_y.min():.0f}, max={sobel_y.max():.0f}")
```

### 3. Laplacian ì—ì§€ ê²€ì¶œ â€” í•œ ë²ˆì— ëª¨ë“  ë°©í–¥

> ğŸ’¡ **ë¹„ìœ **: Sobelì´ ê°€ë¡œÂ·ì„¸ë¡œë¥¼ ë”°ë¡œ ì¡°ì‚¬í•˜ëŠ” íƒì •ì´ë¼ë©´, Laplacianì€ **í•œ ë²ˆì— ì‚¬ë°©ì„ ë‘˜ëŸ¬ë³´ëŠ” íƒì •**ì…ë‹ˆë‹¤. ëª¨ë“  ë°©í–¥ì˜ ë°ê¸° ë³€í™”ë¥¼ í•œêº¼ë²ˆì— ì¡ì•„ëƒ…ë‹ˆë‹¤.

Laplacianì€ ì´ë¯¸ì§€ì˜ **2ì°¨ ë¯¸ë¶„**ì„ ê³„ì‚°í•©ë‹ˆë‹¤. ì—ì§€ì—ì„œ 2ì°¨ ë¯¸ë¶„ì€ 0ì„ ì§€ë‚˜ê°€ëŠ”ë°, ì´ **ì˜êµì°¨(Zero-Crossing)** ì§€ì ì´ ì—ì§€ ìœ„ì¹˜ì…ë‹ˆë‹¤.

```python
import cv2

img = cv2.imread("photo.jpg", cv2.IMREAD_GRAYSCALE)

# ë…¸ì´ì¦ˆ ì œê±°ë¥¼ ìœ„í•´ ë¸”ëŸ¬ ë¨¼ì € ì ìš©
blurred = cv2.GaussianBlur(img, (3, 3), 0)

# Laplacian ì ìš©
laplacian = cv2.Laplacian(blurred, cv2.CV_64F)
laplacian = np.uint8(np.abs(laplacian))

print(f"Laplacian ê²°ê³¼: shape={laplacian.shape}")
```

> âš ï¸ **ì£¼ì˜**: Laplacianì€ ë…¸ì´ì¦ˆì— ë¯¼ê°í•©ë‹ˆë‹¤. ë°˜ë“œì‹œ **ê°€ìš°ì‹œì•ˆ ë¸”ëŸ¬ë¥¼ ë¨¼ì €** ì ìš©í•˜ì„¸ìš”.

### 4. Canny ì—ì§€ ê²€ì¶œ â€” ê°€ì¥ ì¸ê¸° ìˆëŠ” ë°©ë²•

> ğŸ’¡ **ë¹„ìœ **: CannyëŠ” ì—ì§€ ê²€ì¶œì˜ **ì˜¬ì¸ì› íŒ¨í‚¤ì§€**ì…ë‹ˆë‹¤. ë…¸ì´ì¦ˆ ì œê±° â†’ ê¸°ìš¸ê¸° ê³„ì‚° â†’ ì–‡ì€ ì„ ìœ¼ë¡œ ì •ë¦¬ â†’ ì§„ì§œ ì—ì§€ë§Œ ë‚¨ê¸°ê¸°ê¹Œì§€ 4ë‹¨ê³„ë¥¼ ìë™ìœ¼ë¡œ ì²˜ë¦¬í•©ë‹ˆë‹¤.

Canny ì•Œê³ ë¦¬ì¦˜ì˜ 4ë‹¨ê³„:

1. **ê°€ìš°ì‹œì•ˆ ë¸”ëŸ¬**: ë…¸ì´ì¦ˆ ì œê±°
2. **ê¸°ìš¸ê¸° ê³„ì‚°**: Sobel í•„í„°ë¡œ ë°©í–¥ê³¼ í¬ê¸° êµ¬í•¨
3. **ë¹„ìµœëŒ€ ì–µì œ(NMS)**: ì—ì§€ë¥¼ 1í”½ì…€ ë‘ê»˜ë¡œ ê°€ëŠ˜ê²Œ ë§Œë“¦
4. **ì´ì¤‘ ì„ê³„ê°’**: ê°•í•œ ì—ì§€ëŠ” ìœ ì§€, ì•½í•œ ì—ì§€ëŠ” ê°•í•œ ì—ì§€ì™€ ì—°ê²°ëœ ê²ƒë§Œ ë‚¨ê¹€

```python
import cv2

img = cv2.imread("photo.jpg", cv2.IMREAD_GRAYSCALE)

# Canny ì—ì§€ ê²€ì¶œ
# threshold1: í•˜í•œ ì„ê³„ê°’, threshold2: ìƒí•œ ì„ê³„ê°’
edges = cv2.Canny(img, 100, 200)

print(f"ì—ì§€ ë§µ: shape={edges.shape}, dtype={edges.dtype}")
print(f"ì—ì§€ í”½ì…€ ë¹„ìœ¨: {(edges > 0).sum() / edges.size * 100:.1f}%")
```

**ì„ê³„ê°’ì— ë”°ë¥¸ ë³€í™”:**

| ì„ê³„ê°’ ì¡°í•© | íš¨ê³¼ |
|------------|------|
| ë‚®ì€ ê°’ (50, 100) | ì—ì§€ë¥¼ ë§ì´ ê²€ì¶œ (ë…¸ì´ì¦ˆ í¬í•¨ ê°€ëŠ¥) |
| ì¤‘ê°„ ê°’ (100, 200) | ê· í˜• ì¡íŒ ê²°ê³¼ (ì¼ë°˜ì  ê¶Œì¥) |
| ë†’ì€ ê°’ (200, 300) | ê°•í•œ ì—ì§€ë§Œ ê²€ì¶œ (ì„¸ë¶€ ì •ë³´ ì†ì‹¤) |

```python
import cv2

img = cv2.imread("photo.jpg", cv2.IMREAD_GRAYSCALE)

# ì„ê³„ê°’ë³„ ë¹„êµ
for low, high in [(50, 100), (100, 200), (200, 300)]:
    edges = cv2.Canny(img, low, high)
    edge_ratio = (edges > 0).sum() / edges.size * 100
    print(f"ì„ê³„ê°’ ({low:3d}, {high:3d}): ì—ì§€ ë¹„ìœ¨ = {edge_ratio:.1f}%")
```

### 5. ì„¸ ê°€ì§€ ë°©ë²• ë¹„êµ

| ë°©ë²• | ì›ë¦¬ | ì¥ì  | ë‹¨ì  |
|------|------|------|------|
| **Sobel** | 1ì°¨ ë¯¸ë¶„ (ê¸°ìš¸ê¸°) | ë°©í–¥ë³„ ì—ì§€ ë¶„ë¦¬ ê°€ëŠ¥ | ë‘êº¼ìš´ ì—ì§€, íŒŒë¼ë¯¸í„° ì¡°ì ˆ í•„ìš” |
| **Laplacian** | 2ì°¨ ë¯¸ë¶„ | ëª¨ë“  ë°©í–¥ í•œë²ˆì— ê²€ì¶œ | ë…¸ì´ì¦ˆì— ë§¤ìš° ë¯¼ê° |
| **Canny** | ë©€í‹°ìŠ¤í…Œì´ì§€ | ê°€ëŠ˜ê³  ê¹¨ë—í•œ ì—ì§€, ê°€ì¥ ì‹¤ìš©ì  | ì„ê³„ê°’ ë‘ ê°œ ì„¤ì • í•„ìš” |

> **ì‹¤ë¬´ ì¶”ì²œ**: ëŒ€ë¶€ë¶„ì˜ ê²½ìš° **Canny**ë¥¼ ë¨¼ì € ì‚¬ìš©í•˜ì„¸ìš”. ë°©í–¥ë³„ ì—ì§€ ì •ë³´ê°€ í•„ìš”í•  ë•Œë§Œ Sobelì„ ì“°ë©´ ë©ë‹ˆë‹¤.

## ì‹¤ìŠµ: ì§ì ‘ í•´ë³´ê¸°

### ì„¸ ê°€ì§€ ì—ì§€ ê²€ì¶œ í•œëˆˆì— ë¹„êµ

```python
import cv2
import numpy as np

img = cv2.imread("photo.jpg", cv2.IMREAD_GRAYSCALE)
blurred = cv2.GaussianBlur(img, (5, 5), 0)

# ì„¸ ê°€ì§€ ì—ì§€ ê²€ì¶œ ì ìš©
sobel_x = cv2.Sobel(blurred, cv2.CV_64F, 1, 0, ksize=3)
sobel_y = cv2.Sobel(blurred, cv2.CV_64F, 0, 1, ksize=3)
sobel = np.uint8(np.clip(np.sqrt(sobel_x**2 + sobel_y**2), 0, 255))

laplacian = np.uint8(np.abs(cv2.Laplacian(blurred, cv2.CV_64F)))

canny = cv2.Canny(blurred, 100, 200)

# ê²°ê³¼ í†µê³„ ë¹„êµ
for name, result in [("Sobel", sobel), ("Laplacian", laplacian), ("Canny", canny)]:
    edge_pixels = (result > 0).sum()
    print(f"{name:10s}: ì—ì§€ í”½ì…€ {edge_pixels:>7,}ê°œ ({edge_pixels/result.size*100:.1f}%)")
```

## í•µì‹¬ ì •ë¦¬

| ê°œë… | ì„¤ëª… |
|------|------|
| **ì—ì§€** | ì´ë¯¸ì§€ì—ì„œ ë°ê¸°ê°€ ê¸‰ê²©íˆ ë³€í•˜ëŠ” ê²½ê³„ |
| **ê¸°ìš¸ê¸°(Gradient)** | ë°ê¸° ë³€í™”ì˜ ë°©í–¥ê³¼ í¬ê¸° (1ì°¨ ë¯¸ë¶„) |
| **Sobel** | ê°€ë¡œ/ì„¸ë¡œ ë°©í–¥ë³„ 1ì°¨ ë¯¸ë¶„ ì»¤ë„ |
| **Laplacian** | ëª¨ë“  ë°©í–¥ 2ì°¨ ë¯¸ë¶„, ë…¸ì´ì¦ˆì— ë¯¼ê° |
| **Canny** | 4ë‹¨ê³„ ìë™ ì²˜ë¦¬, ê°€ì¥ ê¹¨ë—í•œ ì—ì§€ ê²€ì¶œ |
| **ì„ê³„ê°’** | Cannyì—ì„œ ì—ì§€ ê°•ë„ ê¸°ì¤€ì„ ê²°ì •í•˜ëŠ” ë‘ ê°’ |

## ë‹¤ìŒ ì„¹ì…˜ ë¯¸ë¦¬ë³´ê¸°

ì—ì§€ê°€ ì´ë¯¸ì§€ì˜ "ê²½ê³„"ë¥¼ ì°¾ëŠ” ê²ƒì´ë¼ë©´, **íŠ¹ì§•ì (Feature)**ì€ ì´ë¯¸ì§€ì—ì„œ "íŠ¹ë³„í•œ ì "ì„ ì°¾ëŠ” ê²ƒì…ë‹ˆë‹¤. ë‹¤ìŒ ì„¹ì…˜ **[íŠ¹ì§•ì  ê²€ì¶œ](./04-feature-detection.md)**ì—ì„œëŠ” SIFT, ORB ë“± ì´ë¯¸ì§€ ë§¤ì¹­ê³¼ ì¸ì‹ì— ì“°ì´ëŠ” í•µì‹¬ ê¸°ë²•ì„ ë°°ì›ë‹ˆë‹¤.

## ì°¸ê³  ìë£Œ

- [OpenCV ê³µì‹ ë¸”ë¡œê·¸ - Edge Detection Using OpenCV](https://opencv.org/blog/edge-detection-using-opencv/) - Sobel, Canny, Laplacian ë¹„êµ ê°€ì´ë“œ
- [OpenCV ê³µì‹ íŠœí† ë¦¬ì–¼ - Canny Edge Detection](https://docs.opencv.org/3.4/da/d22/tutorial_py_canny.html) - Canny ì•Œê³ ë¦¬ì¦˜ 4ë‹¨ê³„ ì„¤ëª…
- [DEV Community - Edge Detection Step-by-Step Guide](https://dev.to/chidoziemanagwu/implementing-edge-detection-with-python-and-opencv-a-step-by-step-guide-57ab) - ì´ˆë³´ììš© ë‹¨ê³„ë³„ êµ¬í˜„ ê°€ì´ë“œ
- [GeeksforGeeks - Real-Time Edge Detection](https://www.geeksforgeeks.org/python/real-time-edge-detection-using-opencv-python/) - ì‹¤ì‹œê°„ ì—ì§€ ê²€ì¶œ ì˜ˆì œ
